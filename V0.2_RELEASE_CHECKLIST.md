# V0.2.0 Release Checklist

**Release Date:** TBD
**Release Name:** The Inventory Tracker & Cash Counter
**Branch:** v0.2-dev ‚Üí main

---

## üß™ Phase 1: Feature Testing

### Inventory Management

- [ ] **WhatsApp Template Import**
  - [ ] Import all 155 items from WhatsApp template
  - [ ] Verify 7 categories created correctly
  - [ ] Verify all items have correct category associations
  - [ ] Check mixed unit parsing (fractions, YES/NO, weights)
  - [ ] Confirm import summary shows correct counts

- [ ] **Inventory Items Management**
  - [ ] Create new item manually
  - [ ] Edit existing item
  - [ ] Toggle item active/inactive status
  - [ ] Delete item (if no transactions)
  - [ ] Search items by name
  - [ ] Filter by category
  - [ ] Filter by low stock status

- [ ] **Inventory Categories**
  - [ ] Create new category
  - [ ] Edit category name
  - [ ] Delete category (if no items)
  - [ ] View items per category

- [ ] **Inventory Transactions**
  - [ ] Record purchase (stock addition)
  - [ ] Record usage (stock deduction)
  - [ ] Record adjustment (manual correction)
  - [ ] View transaction history
  - [ ] Filter transactions by type
  - [ ] Filter transactions by date
  - [ ] Verify quantity calculations are correct

- [ ] **Daily Count Feature (Primary Feature)**
  - [ ] Navigate to Daily Count tab
  - [ ] All 155 items display in checklist view
  - [ ] Items grouped by 5 categories
  - [ ] Category headers are sticky while scrolling
  - [ ] Expand/collapse categories works
  - [ ] Current quantities prefill correctly
  - [ ] +/- buttons increment/decrement
  - [ ] Direct number input accepts decimals
  - [ ] Changed items highlighted visually
  - [ ] Progress shows "X of Y items counted"
  - [ ] "Save All Changes" creates batch adjustment
  - [ ] Success message after save
  - [ ] Transaction history shows adjustment records
  - [ ] Last counted timestamp displays

- [ ] **Low Stock Alerts**
  - [ ] Low stock items show warning badge
  - [ ] Low stock count displays on dashboard
  - [ ] Items below min_threshold flagged correctly

### Cash Counter

- [ ] **Opening Cash Counter**
  - [ ] Open counter with opening balance
  - [ ] Cannot open if already open
  - [ ] Opening balance saved correctly

- [ ] **Closing Cash Counter**
  - [ ] Enter closing balance
  - [ ] Variance calculated automatically
  - [ ] Expected closing calculated from orders
  - [ ] Cannot close if not open

- [ ] **Owner Verification**
  - [ ] Enter owner password to verify
  - [ ] Correct password marks as verified
  - [ ] Wrong password shows error
  - [ ] Cannot verify if not closed

- [ ] **Cash Counter History**
  - [ ] View past cash counts
  - [ ] Filter by date range
  - [ ] Export to Excel/CSV (if implemented)
  - [ ] Variance highlighting (red if >threshold)

### Existing Features (Regression Testing)

- [ ] **Orders System**
  - [ ] Create new order
  - [ ] Add/remove items from order
  - [ ] Calculate totals with GST correctly
  - [ ] Print receipt (KOT)
  - [ ] Settle payment (cash/card/UPI)
  - [ ] Edit payments in order history
  - [ ] Partial serving functionality works
  - [ ] Active orders display correctly
  - [ ] Order history filtering by date

- [ ] **Menu Management**
  - [ ] Create/edit/delete categories
  - [ ] Create/edit/delete menu items
  - [ ] Toggle item availability
  - [ ] Image upload (if implemented)

- [ ] **Dark Mode**
  - [ ] Toggle dark mode works
  - [ ] All pages render correctly in dark mode
  - [ ] Inventory pages look good in dark mode
  - [ ] Cash counter pages look good in dark mode
  - [ ] No broken styles or contrast issues

---

## üì± Phase 2: Mobile Testing

### Daily Count UI (Critical - Primary Workflow)

**Test on iOS (Safari):**
- [ ] Touch targets minimum 48px (easy to tap)
- [ ] Number keyboard appears on input focus
- [ ] +/- buttons respond to touch
- [ ] One-handed operation smooth
- [ ] Scrolling performance good with 155 items
- [ ] Sticky headers work while scrolling
- [ ] Save button accessible while scrolling

**Test on Android (Chrome):**
- [ ] Touch targets minimum 48px
- [ ] Number keyboard appears on input focus
- [ ] +/- buttons respond to touch
- [ ] One-handed operation smooth
- [ ] Scrolling performance good with 155 items
- [ ] Sticky headers work while scrolling
- [ ] Save button accessible while scrolling

### General Mobile Testing

**Test on both iOS and Android:**
- [ ] All pages responsive on mobile screens
- [ ] Navigation menu accessible
- [ ] Forms easy to fill on mobile
- [ ] Modals display correctly
- [ ] Buttons large enough to tap
- [ ] No horizontal scrolling issues

---

## üîß Phase 3: Technical Validation

### Backend

- [ ] **API Endpoints**
  - [ ] All inventory endpoints return correct status codes
  - [ ] No 500 errors in logs
  - [ ] Response schemas validate correctly (Pydantic v2)
  - [ ] Timestamps set correctly on all records
  - [ ] Foreign key constraints working

- [ ] **Database**
  - [ ] Migration script runs without errors
  - [ ] All 4 new tables created correctly
  - [ ] Sample data inserts successfully
  - [ ] Queries perform efficiently with 155+ items

- [ ] **Build & Startup**
  - [ ] `uv run uvicorn app.main:app` starts without errors
  - [ ] No import errors or dependency issues
  - [ ] API docs accessible at /docs

### Frontend

- [ ] **Build**
  - [ ] `npm run build` completes successfully
  - [ ] No TypeScript errors
  - [ ] No linting errors
  - [ ] Build output size reasonable

- [ ] **Runtime**
  - [ ] `npm run dev` starts without errors
  - [ ] No console errors on page load
  - [ ] API calls successful
  - [ ] React Query caching works correctly

---

## üìù Phase 4: Documentation & Version Updates

### Version Numbers

- [ ] Update `backend/app/version.py` to `__version__ = "0.2.0"`
- [ ] Update `frontend/src/version.ts` to `export const VERSION = '0.2.0'`
- [ ] Update `backend/pyproject.toml` to `version = "0.2.0"`
- [ ] Update `frontend/package.json` to `"version": "0.2.0"`

### CHANGELOG.md

- [ ] Add v0.2.0 section with release date
- [ ] List all new features:
  - Complete inventory management system
  - WhatsApp template import tool
  - Daily count UI (mobile-optimized)
  - Transaction tracking (purchase/usage/adjustment)
  - Low stock alerts
  - Daily cash counter system
  - Owner verification workflow
  - Variance tracking
  - Dark mode theme toggle (from v0.1.2)
  - Partial serving (from v0.1.2)
  - Payment editing (from v0.1.2)
- [ ] Document database changes (4 new tables)
- [ ] Document API changes (20+ new endpoints)
- [ ] Document breaking changes (if any)

### README.md

- [ ] Update features list with v0.2.0 additions
- [ ] Add screenshots of:
  - Inventory management page
  - Daily Count UI
  - Cash counter interface
- [ ] Update installation instructions if needed
- [ ] Add migration instructions section

### Migration Guide

- [ ] Create `docs/MIGRATION_V0.2.md` with:
  - Database migration steps
  - Backup instructions
  - Rollback procedure
  - Expected downtime
  - Post-migration verification steps

---

## üöÄ Phase 5: Pre-Merge Validation

### Code Quality

- [ ] All TODO comments reviewed
- [ ] No hardcoded credentials or secrets
- [ ] No debug console.logs in production code
- [ ] Error handling appropriate
- [ ] Comments accurate and helpful

### Git Hygiene

- [ ] All changes committed
- [ ] Commit messages clear and descriptive
- [ ] No merge conflicts with main
- [ ] Branch is up to date: `git pull origin v0.2-dev`

### Final Testing

- [ ] Fresh database test:
  - [ ] Delete restaurant.db
  - [ ] Run migration script
  - [ ] Import WhatsApp template
  - [ ] Create sample transactions
  - [ ] Open/close cash counter
  - [ ] Verify everything works from scratch

---

## üéØ Phase 6: Release Execution

### Pre-Merge

- [ ] Backup production database: `cp restaurant.db restaurant_pre_v0.2.0_backup.db`
- [ ] Review all changes: `git log main..v0.2-dev --oneline`
- [ ] Final smoke test on v0.2-dev branch

### Merge to Main

```bash
# Ensure v0.2-dev is up to date
git checkout v0.2-dev
git pull origin v0.2-dev

# Ensure main is up to date
git checkout main
git pull origin main

# Merge v0.2-dev into main
git merge v0.2-dev --no-ff -m "Release v0.2.0: Inventory Management & Cash Counter

Features:
- Complete inventory management system with WhatsApp import
- Mobile-optimized Daily Count UI for end-of-day stock counting
- Transaction tracking (purchase/usage/adjustment)
- Low stock alerts and reporting
- Daily cash counter with owner verification
- Variance tracking and reconciliation
- Dark mode theme toggle (from v0.1.2)
- Partial serving and payment editing (from v0.1.2)

Database: 4 new tables (inventory_categories, inventory_items,
inventory_transactions, daily_cash_counter)

API: 20+ new REST endpoints for inventory and cash management

Migration: Run backend/scripts/migrate_v02_add_inventory_and_cash_tables.py"

# Verify merge was successful
git log -1
```

- [ ] Merge completed without conflicts
- [ ] Commit message is descriptive

### Create Release Tag

```bash
git tag -a v0.2.0 -m "Version 0.2.0: Inventory Management & Cash Counter

## New Features

### Inventory Management
- WhatsApp template import tool (155 items, mixed unit formats)
- Mobile-optimized Daily Count UI with touch-friendly controls
- Inventory items CRUD with categories
- Transaction tracking: Purchase, Usage, Adjustment
- Batch adjustment for daily counts
- Low stock alerts and thresholds
- Transaction history with filtering

### Cash Counter
- Daily cash counter open/close workflow
- Owner password verification
- Automatic variance calculation
- Cash count history and reporting
- Expected vs actual reconciliation

### Enhancements (from v0.1.2)
- Dark mode theme toggle
- Partial serving for orders
- Payment editing in order history

## Technical

### Database
- 4 new tables with SQLAlchemy models
- Migration script: migrate_v02_add_inventory_and_cash_tables.py
- Foreign key relationships and constraints

### API
- 20+ new REST endpoints
- Pydantic v2 schemas
- Transaction audit trail

### Frontend
- React Query for server state
- Mobile-first responsive design
- Touch-optimized Daily Count interface
- Real-time inventory updates

## Installation

1. Backup database: cp restaurant.db restaurant_backup.db
2. Pull code: git checkout v0.2.0
3. Backend: uv sync
4. Run migration: uv run python backend/scripts/migrate_v02_add_inventory_and_cash_tables.py
5. Frontend: npm install && npm run build
6. Restart services

## Breaking Changes
- None (backward compatible)

## Migration Notes
- Existing orders, menu items, and settings preserved
- New inventory system starts with empty database
- Use WhatsApp import tool for bulk initial setup"

# Verify tag created
git tag -l -n20 v0.2.0
```

- [ ] Tag created successfully
- [ ] Tag message is complete and accurate

### Push to Remote

```bash
# Push main branch
git push origin main

# Push tag
git push origin v0.2.0

# Verify on GitHub
```

- [ ] Main branch pushed successfully
- [ ] Tag pushed successfully
- [ ] Verify on GitHub web interface

---

## üì¶ Phase 7: Deployment (Production)

### Pre-Deployment

- [ ] Production database backed up
- [ ] Maintenance window scheduled (if needed)
- [ ] Team notified of deployment

### Deployment Steps

```bash
# On production server
cd /path/to/lily-cafe-pos

# Backup database
cp restaurant.db restaurant_pre_v0.2.0_$(date +%Y%m%d_%H%M%S).db

# Pull latest code
git fetch origin
git checkout v0.2.0

# Backend dependencies
cd backend
uv sync

# Run migration
uv run python scripts/migrate_v02_add_inventory_and_cash_tables.py

# Frontend build
cd ../frontend
npm install
npm run build

# Restart services (adjust for your setup)
# Example: systemctl restart lily-cafe-backend
# Example: systemctl restart lily-cafe-frontend
```

- [ ] Code deployed to production
- [ ] Migration ran successfully
- [ ] Services restarted

### Post-Deployment Verification

- [ ] Backend API responding: `curl http://localhost:8000/api/v1/config`
- [ ] Frontend loads correctly
- [ ] Database tables created: Check with SQLite browser
- [ ] Test core workflows:
  - [ ] Create an order and settle payment
  - [ ] Open/close cash counter
  - [ ] Import inventory template
  - [ ] Record a transaction
  - [ ] View inventory items

### Monitoring

- [ ] Check backend logs for errors
- [ ] Monitor API response times
- [ ] Watch for any 500 errors
- [ ] Verify all features accessible

---

## üéâ Phase 8: Post-Release

### Communication

- [ ] Notify team of successful release
- [ ] Share release notes
- [ ] Provide training if needed on new features

### Documentation

- [ ] Update internal wiki/docs with v0.2.0 info
- [ ] Create video tutorial for Daily Count workflow (optional)
- [ ] Document any production issues encountered

### Monitoring Period

**First 24 hours:**
- [ ] Monitor error logs
- [ ] Check for any user-reported issues
- [ ] Verify performance is acceptable

**First week:**
- [ ] Collect user feedback on Daily Count UI
- [ ] Monitor inventory transaction accuracy
- [ ] Check cash counter variance trends

### Issue Tracking

- [ ] Create GitHub issues for any bugs found
- [ ] Prioritize hotfixes if critical issues
- [ ] Plan v0.2.1 patch release if needed

---

## üîô Rollback Plan (If Needed)

If critical issues are discovered post-deployment:

```bash
# Restore database backup
cp restaurant_pre_v0.2.0_backup.db restaurant.db

# Checkout previous version
git checkout v0.1.2

# Reinstall dependencies
cd backend && uv sync
cd ../frontend && npm install && npm run build

# Restart services
```

- [ ] Rollback procedure tested
- [ ] Rollback time estimated: ~10 minutes

---

## ‚úÖ Release Sign-Off

**Release Manager:** _________________________
**Date:** _________________________
**Sign-off:** _________________________

**QA Tester:** _________________________
**Date:** _________________________
**Sign-off:** _________________________

**Stakeholder:** _________________________
**Date:** _________________________
**Sign-off:** _________________________

---

## üìä Success Metrics

After 1 week of v0.2.0 in production:

- [ ] No critical bugs reported
- [ ] Daily Count UI adopted by staff (< 15 min per count)
- [ ] Inventory accuracy improved (variance < 5%)
- [ ] Cash counter variance tracking helpful
- [ ] No performance degradation
- [ ] User satisfaction positive

---

**Notes:**

- This checklist should be completed in order
- Each phase depends on the previous phase passing
- Do not proceed to merge if any critical tests fail
- Document any deviations from this checklist
- Keep a copy of this checklist filled out for records
